<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dog/Cat NN Simulator — backprop animation</title>
  <link rel="stylesheet" href="test1.css" />
</head>

<body>

  <div class="topbar">
    <div class="field">
      <label>Epoch</label>
      <input id="epoch" type="number" min="1" value="1" />
    </div>
    <div class="field">
      <label>Learning rate</label>
      <select id="lr">
        <option value="0.00001">0.00001</option>
        <option value="0.0001">0.0001</option>
        <option value="0.001" selected>0.001</option>
        <option value="0.01">0.01</option>
        <option value="0.1">0.1</option>
      </select>
    </div>
    <div class="field">
      <label>Activation</label>
      <select id="act">
        <option value="relu" selected>ReLU</option>
        <option value="tanh">tanh</option>
      </select>
    </div>
    <div class="field">
      <label>Regularization</label>
      <select id="reg">
        <option value="none" selected>None</option>
        <option value="l2">L2 (demo)</option>
      </select>
    </div>

    <div class="statusPill">
      <span class="dot" id="statusDot"></span>
      <span id="statusText">waiting for upload</span>
    </div>

    
  </div>

  <div class="main">

    <!-- LEFT -->
    <div class="panel">
      <div class="panelHeader">
        <span>Input image</span><span class="mono" style="font-size:12px;color:var(--muted)">dog/cat</span>
      </div>
      <div class="panelBody">
        <div class="uploadBox" id="dropZone">
          <div class="uploadIcon">
            <svg viewBox="0 0 24 24" fill="none" stroke="#111827" stroke-width="1.6" stroke-linecap="round"
              stroke-linejoin="round">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
              <path d="M14 2v6h6" />
              <path d="M12 18V11" />
              <path d="M9 14l3-3 3 3" />
            </svg>
          </div>

          <div class="hint">
            Upload an image → input is drawn as <span class="mono">0-0…0-0</span><br />
            Hidden layers are condensed like <span class="mono">0-0-0-0…0-0-0-0</span><br />
            Backprop animation reveals <b>one</b> weight & gradient at a time.
          </div>

          <input id="file" type="file" accept="image/*" style="display:none" />
          <button id="btnChoose"
            style="border:1px solid var(--border);border-radius:12px;padding:10px 12px;font-weight:900;cursor:pointer;background:#fff;">
            Choose image
          </button>

          <div id="preview" class="preview">
            <img id="previewImg" alt="Aperçu de l'image">
          </div>

          <!-- Conteneur de résultats intégré -->
          <div id="result-container" class="result-container" style="display: none;">
            <div class="result-overlay"></div>
            <div class="result-popup">
              <span class="close-btn" onclick="closeResult()">&times;</span>
              <h2>Résultat du traitement</h2>
              <div id="popup-content"></div>
            </div>
          </div>

        </div>

        <div class="log mono" id="log"></div>
      </div>
    </div>

    <!-- MIDDLE -->
    <div class="centerWrap">
      <div class="layerBanner">
        <div class="btn" id="btnRem">−</div>
        <div class="btn" id="btnAdd">+</div>
        <div class="count"><span id="layerCount">3</span> HIDDEN LAYERS</div>

        <div class="controls hiddenControls">
          <span class="mono">showK</span>
          <input id="showK" type="number" min="2" value="6" />

          <span class="mono">new size</span>
          <input id="newSize" type="number" min="1" value="16" style="width:80px" />

          <span class="mono">input K</span>
          <input id="inK" type="number" min="1" value="3" style="width:60px" />
        </div>
      </div>

      <div class="networkStage">
        <svg id="svg" viewBox="0 0 900 620" preserveAspectRatio="xMidYMid meet"></svg>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="panel">
      <div class="panelHeader">
        <span>Loss curve</span><span class="mono" style="font-size:12px;color:var(--muted)">BCE</span>
      </div>
      <div class="panelBody">
        <div class="chartWrap"><canvas id="chart" width="800" height="520"></canvas></div>

        <div class="rightStats">
          <div class="stat">
            <div class="k">ŷ (pred prob)</div>
            <div class="v mono" id="yhat">—</div>
          </div>
          <div class="stat">
            <div class="k">Loss C</div>
            <div class="v mono" id="loss">—</div>
          </div>
          <div class="stat">
            <div class="k">Label y</div>
            <div class="v mono" id="labelY">—</div>
          </div>
          <div class="stat">
            <div class="k">Epoch</div>
            <div class="v mono" id="epochView">1</div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div id="tooltip"></div>
  <script src="test1.js"></script>
</body>

</html>